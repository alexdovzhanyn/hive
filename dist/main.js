!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.AlexDovzhanynScreeps=r():e.AlexDovzhanynScreeps=r()}(this,(()=>(()=>{"use strict";var e={247:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.captureFlaggedRoom=r.attackHostileCreeps=r.repairWalls=r.buildClosestContructionSite=r.getEnergyFromNearestEnergyContainer=r.depositInNearestEnergyContainer=r.upgradeController=r.repairNearbyStructures=r.harvestNearestSource=void 0;const a=t(219),o=(e,r)=>{e.memory.lastAnnouncement!=r&&(e.say(r),e.memory.lastAnnouncement=r)};var n;!function(e){e.Harvesting="#A4E4B8",e.Repairing="#D4B798",e.Depositing="#F4E19A",e.Building="#A3C1E0",e.Attacking="#EFA4A4"}(n||(n={}));const i={opacity:.4};r.harvestNearestSource=e=>{o(e,"Harvesting");const r=e.pos.findClosestByPath(FIND_SOURCES);return e.harvest(r)==ERR_NOT_IN_RANGE&&e.moveTo(r,{maxRooms:1,visualizePathStyle:Object.assign(Object.assign({},i),{stroke:n.Harvesting})}),!0},r.repairNearbyStructures=e=>{let r=!1;const t=e.pos.findClosestByPath(FIND_STRUCTURES,{filter:({structureType:e,hits:r,hitsMax:t})=>e!=STRUCTURE_WALL&&r<t});return t&&(o(e,"Repairing"),r=!0,e.repair(t)==ERR_NOT_IN_RANGE&&e.moveTo(t,{maxRooms:1,visualizePathStyle:Object.assign(Object.assign({},i),{stroke:n.Repairing})})),r},r.upgradeController=e=>{e.upgradeController(e.room.controller)==ERR_NOT_IN_RANGE&&e.moveTo(e.room.controller)},r.depositInNearestEnergyContainer=e=>{let r=!1;const t=e.pos.findClosestByPath(FIND_STRUCTURES,{filter:e=>[STRUCTURE_EXTENSION,STRUCTURE_SPAWN,STRUCTURE_CONTAINER,STRUCTURE_TOWER].includes(e.structureType)&&e.energy<e.energyCapacity});return t?(o(e,"Depositing"),r=!0,e.transfer(t,RESOURCE_ENERGY)===ERR_NOT_IN_RANGE&&e.moveTo(t,{maxRooms:1,visualizePathStyle:Object.assign(Object.assign({},i),{stroke:n.Depositing})})):e.say("No available container for deposit"),r},r.getEnergyFromNearestEnergyContainer=e=>{let r=!1;const t=e.pos.findClosestByPath(FIND_STRUCTURES,{filter:({structureType:e,energy:r=0})=>e==STRUCTURE_CONTAINER&&r>0});return t&&(o(e,"Get Energy"),r=!0,e.withdraw(t,RESOURCE_ENERGY)===ERR_NOT_IN_RANGE&&e.moveTo(t,{maxRooms:1})),r},r.buildClosestContructionSite=e=>{let r=!1;const t=e.pos.findClosestByPath(FIND_CONSTRUCTION_SITES);return t&&(o(e,"Building"),r=!0,e.build(t)==ERR_NOT_IN_RANGE&&e.moveTo(t,{maxRooms:1,visualizePathStyle:Object.assign(Object.assign({},i),{stroke:n.Building})})),r},r.repairWalls=e=>{let r=!1;const t=e.pos.findClosestByPath(FIND_STRUCTURES,{filter:({hits:e,hitsMax:r,structureType:t})=>t==STRUCTURE_WALL&&e<1e4});return t&&(o(e,"Fixing Walls"),r=!0,e.repair(t)==ERR_NOT_IN_RANGE&&e.moveTo(t,{maxRooms:1,visualizePathStyle:Object.assign(Object.assign({},i),{stroke:n.Repairing})})),r},r.attackHostileCreeps=e=>{o(e,"Attacking!");const r=e.pos.findClosestByPath(FIND_HOSTILE_CREEPS,{filter:({owner:e})=>!a.allies.includes(e.username)});return e.attack(r)==ERR_NOT_IN_RANGE&&e.moveTo(r,{maxRooms:1,visualizePathStyle:Object.assign(Object.assign({},i),{stroke:n.Attacking})}),!0},r.captureFlaggedRoom=e=>{let r=!1;const t=Game.flags.CaptureRoom;if(t&&e.carry.energy==e.carryCapacity&&(r=!0,e.moveTo(t),e.pos==t.pos&&(t.remove(),e.memory.captureRoom=e.room.name)),e.memory.captureRoom){r=!0;const t=Game.rooms[e.memory.captureRoom].controller;e.claimController(t)==ERR_NOT_IN_RANGE?e.moveTo(t):e.memory.captureRoom=""}return r}},702:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getBlueprintForSpawnStrategy=void 0;const a=t(883),o=t(247),n=t(101),i={bodyParts:[WORK,CARRY,CARRY,MOVE,MOVE],name:"Builder",defaultMemory:{role:a.Role.Builder}};r.getBlueprintForSpawnStrategy=e=>({[n.SpawnStrategy.Tier1]:i,[n.SpawnStrategy.Tier2]:Object.assign(Object.assign({},i),{bodyParts:[...i.bodyParts,WORK,MOVE]})}[e]),r.default={run:function(e){if(e.memory.building&&0==e.carry.energy&&(e.memory.building=!1),e.memory.building||e.carry.energy!=e.carryCapacity||(e.memory.building=!0),e.memory.building){if((0,o.repairNearbyStructures)(e))return;if((0,o.buildClosestContructionSite)(e))return;(0,o.repairWalls)(e)}else{if((0,o.harvestNearestSource)(e))return;e.carry.energy==e.carryCapacity&&(0,o.depositInNearestEnergyContainer)(e)}}}},290:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getBlueprintForSpawnStrategy=void 0;const a=t(883),o=t(219),n=t(247),i=t(101),s={bodyParts:[WORK,CARRY,ATTACK,MOVE],name:"Defender",defaultMemory:{role:a.Role.Defender}};r.getBlueprintForSpawnStrategy=e=>({[i.SpawnStrategy.Tier1]:s,[i.SpawnStrategy.Tier2]:Object.assign(Object.assign({},s),{bodyParts:[...s.bodyParts,ATTACK,MOVE]})}[e]),r.default={run:function(e){e.room.find(FIND_HOSTILE_CREEPS,{filter:({owner:e})=>!o.allies.includes(e.username)}).length>0&&e.carry.energy>e.carryCapacity/5?(0,n.attackHostileCreeps)(e):0==e.room.find(FIND_HOSTILE_CREEPS).length&&1==e.memory.canUpgrade?(e.upgradeController(e.room.controller)==ERR_NOT_IN_RANGE&&e.memory.canUpgrade&&e.moveTo(e.room.controller),e.carry.energy<1&&(e.memory.canUpgrade=!1)):((0,n.harvestNearestSource)(e),e.carry.energy==e.carryCapacity&&(e.say("Upgrading"),e.memory.canUpgrade=!0))}}},435:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getBlueprintForSpawnStrategy=void 0;const a=t(883),o=t(247),n=t(101),i={bodyParts:[WORK,WORK,CARRY,MOVE],name:"Harvester",defaultMemory:{role:a.Role.Harvester}};r.getBlueprintForSpawnStrategy=e=>({[n.SpawnStrategy.Tier1]:i,[n.SpawnStrategy.Tier2]:Object.assign(Object.assign({},i),{bodyParts:[...i.bodyParts,WORK,MOVE]})}[e]),r.default={run:function(e){e.carry.energy<e.carryCapacity?(0,o.harvestNearestSource)(e):(0,o.depositInNearestEnergyContainer)(e)}}},741:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getBlueprintForSpawnStrategy=void 0;const a=t(883),o=t(247),n={bodyParts:[MOVE,MOVE,MOVE,CLAIM,CARRY,CARRY,WORK],name:"Missionary",defaultMemory:{role:a.Role.Missionary}};r.getBlueprintForSpawnStrategy=()=>n,r.default={run:e=>{o.captureFlaggedRoom||(0,o.harvestNearestSource)(e)}}},195:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getBlueprintForSpawnStrategy=void 0;const a=t(883),o=t(247),n=t(101),i={bodyParts:[WORK,CARRY,CARRY,MOVE,MOVE],name:"Upgrader",defaultMemory:{role:a.Role.Upgrader}};r.getBlueprintForSpawnStrategy=e=>({[n.SpawnStrategy.Tier1]:i,[n.SpawnStrategy.Tier2]:Object.assign(Object.assign({},i),{bodyParts:[...i.bodyParts,WORK,MOVE]})}[e]),r.default={run:function(e){e.memory.upgrading&&0==e.carry.energy&&(e.memory.upgrading=!1,e.say("harvesting")),e.memory.upgrading||e.carry.energy!=e.carryCapacity||(e.memory.upgrading=!0,e.say("upgrading")),e.memory.upgrading?(0,o.upgradeController)(e):(0,o.harvestNearestSource)(e)}}},94:function(e,r,t){var a=this&&this.__createBinding||(Object.create?function(e,r,t,a){void 0===a&&(a=t);var o=Object.getOwnPropertyDescriptor(r,t);o&&!("get"in o?!r.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,a,o)}:function(e,r,t,a){void 0===a&&(a=t),e[a]=r[t]}),o=this&&this.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&a(r,e,t);return o(r,e),r},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});const s=i(t(435)),l=i(t(195)),u=i(t(290)),p=i(t(702)),c=i(t(741)),y=n(t(152)),d=t(883),g=t(147);r.default=()=>{t.g.spawnCreep||(t.g.spawnCreep=y.attemptSpawnCreep);const e={[d.Role.Harvester]:[],[d.Role.Upgrader]:[],[d.Role.Defender]:[],[d.Role.Builder]:[],[d.Role.Missionary]:[]},r={harvester:s.default,upgrader:l.default,defender:u.default,builder:p.default,missionary:c.default};for(var a in Object.values(Game.creeps).forEach((t=>{e[t.memory.role].push(t),r[t.memory.role].run(t)})),Memory.creeps)Game.creeps[a]||delete Memory.creeps[a];Game.spawns.Spawn1.room.find(FIND_MY_STRUCTURES,{filter:({structureType:e})=>e==STRUCTURE_TOWER}).forEach((e=>{(0,g.attackHostileCreeps)(e)})),y.default.spawn(e)}},152:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.attemptSpawnCreep=void 0;const a=t(435),o=t(702),n=t(290),i=t(195),s=t(741),l=t(219),u=t(883),p=t(101),c={[u.Role.Harvester]:a.getBlueprintForSpawnStrategy,[u.Role.Builder]:o.getBlueprintForSpawnStrategy,[u.Role.Defender]:n.getBlueprintForSpawnStrategy,[u.Role.Upgrader]:i.getBlueprintForSpawnStrategy,[u.Role.Missionary]:s.getBlueprintForSpawnStrategy},y=[u.Role.Harvester,u.Role.Builder,u.Role.Upgrader,u.Role.Defender];r.attemptSpawnCreep=(e,r)=>{const{bodyParts:t,name:a,defaultMemory:o}=c[e](r),n=Game.spawns.Spawn1.room.find(FIND_MY_STRUCTURES,{filter:{structureType:STRUCTURE_EXTENSION}});n.push(Game.spawns.Spawn1);const i=l.creepNames[Math.floor(100*Math.random())]+` (${a})`,s={memory:o,energyStructures:n};if(Game.spawns.Spawn1.spawnCreep(t,i,Object.assign(Object.assign({},s),{dryRun:!0}))!=OK)return;const u=Game.spawns.Spawn1.spawnCreep(t,i,s);u!=OK&&console.log(`Couldn't spawn creep: ${u}`)};const d=e=>{const t={harvester:3,builder:2,defender:2,upgrader:2};let a=!0;for(const o of y)if(e[o].length<t[o])return a=!1,(0,r.attemptSpawnCreep)(o,p.SpawnStrategy.Tier1);a&&(0,r.attemptSpawnCreep)(u.Role.Builder,p.SpawnStrategy.Tier1)},g={[p.SpawnStrategy.Tier1]:d,[p.SpawnStrategy.Tier2]:e=>{const t={harvester:5,builder:3,defender:3,upgrader:3};let a=!0;for(const o of y)if(e[o].length<t[o])return a=!1,(0,r.attemptSpawnCreep)(o,p.SpawnStrategy.Tier2);a&&(0,r.attemptSpawnCreep)(u.Role.Builder,p.SpawnStrategy.Tier2)}};r.default={spawn:e=>{if(!Memory.allowAutoSpawn||Game.spawns.Spawn1.spawning)return;if(Object.keys(Game.creeps).length<3)return d(e);let r=Game.spawns.Spawn1.room.controller.level,t=g[r];for(;!t;){if(r--,0==r){t=d;break}t=g[r]}t(e)}}},147:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.attackHostileCreeps=void 0;const a=t(219);r.attackHostileCreeps=e=>{const r=e.pos.findInRange(FIND_HOSTILE_CREEPS,12,{filter:({owner:e})=>!a.allies.includes(e.username)});if(!r)return;const t=r.sort(((r,t)=>t.pos.getRangeTo(e)-r.pos.getRangeTo(e)))[0];e.attack(t)}},927:function(e,r,t){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.loop=void 0;var o=t(94);Object.defineProperty(r,"loop",{enumerable:!0,get:function(){return a(o).default}})},883:(e,r)=>{var t;Object.defineProperty(r,"__esModule",{value:!0}),r.Role=void 0,(t=r.Role||(r.Role={})).Harvester="harvester",t.Builder="builder",t.Upgrader="upgrader",t.Defender="defender",t.Missionary="missionary"},101:(e,r)=>{var t;Object.defineProperty(r,"__esModule",{value:!0}),r.SpawnStrategy=void 0,(t=r.SpawnStrategy||(r.SpawnStrategy={}))[t.Tier1=0]="Tier1",t[t.Tier2=1]="Tier2",t[t.Tier3=2]="Tier3"},219:e=>{e.exports=JSON.parse('{"allies":["WhatYouKnowBoutLeetCode"],"creepNames":["Aiden","Olivia","Jackson","Emma","Liam","Sophia","Lucas","Isabella","Mason","Mia","Ethan","Amelia","Logan","Avery","James","Harper","Benjamin","Evelyn","Alexander","Abigail","Henry","Ella","Sebastian","Chloe","William","Grace","Carter","Lily","Wyatt","Aria","Gabriel","Nora","Levi","Zoey","Isaac","Hannah","Mateo","Layla","Owen","Riley","Caleb","Lillian","Nathan","Penelope","Julian","Aubrey","Jack","Scarlett","Elijah","Stella","Lucas","Mila","Dylan","Zoe","Luke","Victoria","Grayson","Hazel","Josiah","Aurora","Jayden","Addison","Michael","Ellie","Daniel","Paisley","Asher","Lucy","Cameron","Anna","Isaiah","Sarah","Elias","Madelyn","Miles","Ruby","Leo","Kennedy","Adrian","Serenity","Hunter","Samantha","Joshua","Caroline","Nolan","Eva","Ezra","Autumn","Thomas","Savannah","Aaron","Everly","Nicholas","Naomi","David","Quinn","Anthony","Piper","Maverick","Sadie","Christopher","Skylar"]}')}},r={};function t(a){var o=r[a];if(void 0!==o)return o.exports;var n=r[a]={exports:{}};return e[a].call(n.exports,n,n.exports,t),n.exports}return t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t(927)})()));